openapi: 3.0.1
info:
  title: Organization Service
  description: "<p>Organization Service APIs are a mesh of policies governing <i>organizations</i>\
    \ in a customer solution. BrightInsight developers use them to define and work\
    \ with organizations and how they are assigned to functions and microservices\
    \ in the customer application. This allows them to easily map permissions and\
    \ data policies for each organization. BrightInsight developers typically provide\
    \ the initial configuration and these remain in place once they have been tested\
    \ and put into production. Organization settings control the functionality available\
    \ to end-users in each organization defined for the customer solution.</p> <p>End-users\
    \ are assigned to each organization and thereby affected by the controls of the\
    \ Organization microservice. This architecture enables the BrightInsight developer\
    \ to configure organizations independently of other BrightInsight microservices,\
    \ and then assign them as needed, making it easy to administer access and functionality\
    \ from other microservices by organization.</p>"
  version: 1.0.0
  x-safety-class: C
  x-safety-class-description: "the loss of the primary function of the Organization\
    \ Service may potentially, worst-case, cause serious injury to the patient."
servers:
- url: http://localhost
  description: Generated server url
paths:
  /organizations/{id}:
    get:
      tags:
      - Organization
      summary: Get Organization
      description: Fetches an organization. Use for looking up settings for a single
        organization.
      operationId: API-OS03
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
        example: 05e78fe8-0742-11eb-adc1-0242ac120002
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/OrganizationDTO'
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_NO_EXIST:
                  $ref: '#/components/examples/OS_NO_EXIST'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_AUTH_REQUIRED:
                  $ref: '#/components/examples/OS_AUTH_REQUIRED'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_PERMISSION_DENIED:
                  $ref: '#/components/examples/OS_PERMISSION_DENIED'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_INTERNAL_ERROR:
                  $ref: '#/components/examples/OS_INTERNAL_ERROR'
      x-validation-rules:
      - name: VR_OS03_001
        description: "The request lacks valid authentication credentials: blank authorization,\
          \ missing authorization, expired user's tokenId. Refer to OS_AUTH_REQUIRED."
      - name: VR_OS03_002
        description: Login user has no permission. Refer to OS_PERMISSION_DENIED.
      - name: VR_OS03_003
        description: The server encountered an unexpected condition. Refer to OS_INTERNAL_ERROR.
      - name: VR_OS03_004
        description: The server can't find the requested resource. Refer to OS_NO_EXIST
      x-permissions:
      - product.organization.get
      x-is-external: "true"
      x-roles:
      - IT_ADMIN
      x-requirements:
      - ORGS-SRS-33
      x-grpc:
        serviceName: OrganizationService
        methodName: get
    put:
      tags:
      - Organization
      summary: Update Organization
      description: "Changes settings for an organization. Use for modifying settings\
        \ for an organization, such as active/inactive status."
      operationId: API-OS04
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
        example: 05e78fe8-0742-11eb-adc1-0242ac120002
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationDTO'
        required: true
      responses:
        "415":
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_UNSUPPORTED_MEDIA_TYPE:
                  $ref: '#/components/examples/OS_UNSUPPORTED_MEDIA_TYPE'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_BAD_REQUEST:
                  $ref: '#/components/examples/OS_BAD_REQUEST'
                OS_BAD_SYNTAX:
                  $ref: '#/components/examples/OS_BAD_SYNTAX'
                OS_PARAM_REQUIRED:
                  $ref: '#/components/examples/OS_PARAM_REQUIRED'
                OS_MUST_BE_BETWEEN:
                  $ref: '#/components/examples/OS_MUST_BE_BETWEEN'
                OS_DATE_FORMAT:
                  $ref: '#/components/examples/OS_DATE_FORMAT'
                OS_INVALID_PERIOD:
                  $ref: '#/components/examples/OS_INVALID_PERIOD'
                OS_MUST_BE_GREATER_THAN_OR_EQUAL:
                  $ref: '#/components/examples/OS_MUST_BE_GREATER_THAN_OR_EQUAL'
                OS_DUPLICATE_FIELD:
                  $ref: '#/components/examples/OS_DUPLICATE_FIELD'
                OS_PARAM_NOT_EXISTS:
                  $ref: '#/components/examples/OS_PARAM_NOT_EXISTS'
        "200":
          description: Success response message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrganizationDTO'
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_NO_EXIST:
                  $ref: '#/components/examples/OS_NO_EXIST'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_AUTH_REQUIRED:
                  $ref: '#/components/examples/OS_AUTH_REQUIRED'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_PERMISSION_DENIED:
                  $ref: '#/components/examples/OS_PERMISSION_DENIED'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_INTERNAL_ERROR:
                  $ref: '#/components/examples/OS_INTERNAL_ERROR'
      x-validation-rules:
      - name: VR_OS04_001
        description: "The request lacks valid authentication credentials: blank authorization,\
          \ missing authorization, expired user's tokenId. Refer to OS_AUTH_REQUIRED."
      - name: VR_OS04_002
        description: Login user has no permission. Refer to OS_PERMISSION_DENIED.
      - name: VR_OS04_003
        description: Invalid Content-Type value. Refer to OS_UNSUPPORTED_MEDIA_TYPE.
      - name: VR_OS04_004
        description: The server encountered an unexpected condition. Refer to OS_INTERNAL_ERROR.
      - name: VR_OS04_005
        description: The server can't find the requested resource. Refer to OS_NO_EXIST.
      - name: VR_OS04_006
        description: There is a syntax error in the message. Refer to OS_BAD_SYNTAX.
      - name: VR_OS04_007
        description: A mandatory field is null. Refer to OS_PARAM_REQUIRED.
      - name: VR_OS04_008
        description: Invalid value not in range. Refer to OS_MUST_BE_BETWEEN.
      - name: VR_OS04_009
        description: Invalid date format. Refer to OS_DATE_FORMAT.
      - name: VR_OS04_010
        description: Invalid date period values. Refer to OS_INVALID_PERIOD.
      - name: VR_OS04_011
        description: Invalid numeric value. Refer to OS_MUST_BE_GREATER_THAN_OR_EQUAL.
      - name: VR_OS04_012
        description: Organization with same name already exists. Refer to OS_DUPLICATE_FIELD.
      - name: VR_OS04_013
        description: Parent Organization does not exist. Refer to OS_PARAM_NOT_EXISTS.
      x-permissions:
      - product.organization.update
      x-is-external: "true"
      x-roles:
      - IT_ADMIN
      x-requirements:
      - ORGS-SRS-28
      x-grpc:
        serviceName: OrganizationService
        methodName: update
    delete:
      tags:
      - Organization
      summary: Delete Organization
      description: Removes an organization from the system. Use for deleting an organization
        (without removing end-users assigned to that organization).
      operationId: API-OS06
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
        example: 05e78fe8-0742-11eb-adc1-0242ac120002
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/ResponseMessage'
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_NO_EXIST:
                  $ref: '#/components/examples/OS_NO_EXIST'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_AUTH_REQUIRED:
                  $ref: '#/components/examples/OS_AUTH_REQUIRED'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_PERMISSION_DENIED:
                  $ref: '#/components/examples/OS_PERMISSION_DENIED'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_INTERNAL_ERROR:
                  $ref: '#/components/examples/OS_INTERNAL_ERROR'
      x-validation-rules:
      - name: VR_OS06_001
        description: "The request lacks valid authentication credentials: blank authorization,\
          \ missing authorization, expired user's tokenId. Refer to OS_AUTH_REQUIRED."
      - name: VR_OS06_002
        description: Login user has no permission. Refer to OS_PERMISSION_DENIED.
      - name: VR_OS06_003
        description: The server encountered an unexpected condition. Refer to OS_INTERNAL_ERROR.
      - name: VR_OS06_004
        description: The server can't find the requested resource. Refer to OS_NO_EXIST
      x-permissions:
      - product.organization.delete
      x-is-external: "true"
      x-roles:
      - IT_ADMIN
      x-requirements:
      - ORGS-SRS-30
      x-grpc:
        serviceName: OrganizationService
        methodName: delete
    patch:
      tags:
      - Organization
      summary: Patch Organization
      description: Change specific settings for an organization. Use for modifying
        particular settings for an organization.
      operationId: API-OS05
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationPartialDTO'
        required: true
      responses:
        "415":
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_UNSUPPORTED_MEDIA_TYPE:
                  $ref: '#/components/examples/OS_UNSUPPORTED_MEDIA_TYPE'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_BAD_REQUEST:
                  $ref: '#/components/examples/OS_BAD_REQUEST'
                OS_BAD_SYNTAX:
                  $ref: '#/components/examples/OS_BAD_SYNTAX'
                OS_PARAM_REQUIRED:
                  $ref: '#/components/examples/OS_PARAM_REQUIRED'
                OS_MUST_BE_BETWEEN:
                  $ref: '#/components/examples/OS_MUST_BE_BETWEEN'
                OS_DATE_FORMAT:
                  $ref: '#/components/examples/OS_DATE_FORMAT'
                OS_INVALID_PERIOD:
                  $ref: '#/components/examples/OS_INVALID_PERIOD'
                OS_MUST_BE_GREATER_THAN_OR_EQUAL:
                  $ref: '#/components/examples/OS_MUST_BE_GREATER_THAN_OR_EQUAL'
                OS_DUPLICATE_FIELD:
                  $ref: '#/components/examples/OS_DUPLICATE_FIELD'
                OS_PARAM_NOT_EXISTS:
                  $ref: '#/components/examples/OS_PARAM_NOT_EXISTS'
        "200":
          description: Success response message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrganizationDTO'
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_NO_EXIST:
                  $ref: '#/components/examples/OS_NO_EXIST'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_AUTH_REQUIRED:
                  $ref: '#/components/examples/OS_AUTH_REQUIRED'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_PERMISSION_DENIED:
                  $ref: '#/components/examples/OS_PERMISSION_DENIED'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_INTERNAL_ERROR:
                  $ref: '#/components/examples/OS_INTERNAL_ERROR'
      x-validation-rules:
      - name: VR_OS05_001
        description: "The request lacks valid authentication credentials: blank authorization,\
          \ missing authorization, expired user's tokenId. Refer to OS_AUTH_REQUIRED."
      - name: VR_OS05_002
        description: Login user has no permission. Refer to OS_PERMISSION_DENIED.
      - name: VR_OS05_003
        description: Invalid Content-Type value. Refer to OS_UNSUPPORTED_MEDIA_TYPE.
      - name: VR_OS05_004
        description: The server encountered an unexpected condition. Refer to OS_INTERNAL_ERROR.
      - name: VR_OS05_005
        description: The server can't find the requested resource. Refer to OS_NO_EXIST.
      - name: VR_OS05_006
        description: There is a syntax error in the message. Refer to OS_BAD_SYNTAX.
      - name: VR_OS05_007
        description: A mandatory field is null. Refer to OS_PARAM_REQUIRED.
      - name: VR_OS05_008
        description: Invalid value not in range. Refer to OS_MUST_BE_BETWEEN.
      - name: VR_OS05_009
        description: Invalid date format. Refer to OS_DATE_FORMAT.
      - name: VR_OS05_010
        description: Invalid date period values. Refer to OS_INVALID_PERIOD.
      - name: VR_OS05_011
        description: Invalid numeric value. Refer to OS_MUST_BE_GREATER_THAN_OR_EQUAL.
      - name: VR_OS05_012
        description: Organization with same name already exists. Refer to OS_DUPLICATE_FIELD.
      - name: VR_OS05_013
        description: Parent Organization does not exist. Refer to OS_PARAM_NOT_EXISTS.
      x-permissions:
      - product.organization.patch
      x-is-external: "true"
      x-roles:
      - IT_ADMIN
      x-requirements:
      - ORGS-SRS-29
  /organizations/{id}/children:
    get:
      tags:
      - Organization
      summary: Get Child Organizations
      description: Fetches a list of child organizations under an organization. Use
        for looking up the organizations that are descendants of an organization.
      operationId: API-OS07
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
        example: 05e78fe8-0742-11eb-adc1-0242ac120002
      - name: level
        in: query
        required: false
        schema:
          type: string
          default: DESCENDANTS
          enum:
          - DIRECT
          - DESCENDANTS
      - name: page
        in: query
        description: One-based page index (1..N)
        schema:
          type: integer
          default: "1"
      - name: size
        in: query
        description: The size of the page to be returned
        schema:
          type: integer
          default: "10"
      - name: sort
        in: query
        description: "Sorting criteria in the format: property(,asc|desc). Default\
          \ sort order is ascending. Multiple sort criteria are supported."
        schema:
          type: array
          items:
            type: string
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/PagingInfoOrganizationDTO'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_BAD_REQUEST:
                  $ref: '#/components/examples/OS_BAD_REQUEST'
                OS_SORT_UNKNOWN:
                  $ref: '#/components/examples/OS_SORT_UNKNOWN'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_AUTH_REQUIRED:
                  $ref: '#/components/examples/OS_AUTH_REQUIRED'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_PERMISSION_DENIED:
                  $ref: '#/components/examples/OS_PERMISSION_DENIED'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_INTERNAL_ERROR:
                  $ref: '#/components/examples/OS_INTERNAL_ERROR'
      x-validation-rules:
      - name: VR_OS07_001
        description: "The request lacks valid authentication credentials: blank authorization,\
          \ missing authorization, expired user's tokenId. Refer to OS_AUTH_REQUIRED."
      - name: VR_OS07_002
        description: Login user has no permission. Refer to OS_PERMISSION_DENIED.
      - name: VR_OS07_003
        description: The server encountered an unexpected condition. Refer to OS_INTERNAL_ERROR.
      - name: VR_OS07_004
        description: A field or parameters contains the wrong data type. Refer to
          OS_BAD_REQUEST.
      - name: VR_OS07_005
        description: Unsupported field to sort by. Refer to OS_SORT_UNKNOWN.
      x-permissions:
      - product.organization.listChildren
      x-is-external: "true"
      x-roles:
      - IT_ADMIN
      x-requirements:
      - ORGS-SRS-32
      x-grpc:
        serviceName: OrganizationService
        methodName: listChildren
  /organizations/user:
    get:
      tags:
      - Organization
      summary: Get User Organizations
      description: Fetches a paged list of organizations that the current user is
        enrolled. Use to list user organizations.
      operationId: API-OS08
      parameters:
      - name: page
        in: query
        description: One-based page index (1..N)
        schema:
          type: integer
          default: "1"
      - name: size
        in: query
        description: The size of the page to be returned
        schema:
          type: integer
          default: "10"
      - name: sort
        in: query
        description: "Sorting criteria in the format: property(,asc|desc). Default\
          \ sort order is ascending. Multiple sort criteria are supported."
        schema:
          type: array
          items:
            type: string
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/PagingInfoOrganizationDTO'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_AUTH_REQUIRED:
                  $ref: '#/components/examples/OS_AUTH_REQUIRED'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_PERMISSION_DENIED:
                  $ref: '#/components/examples/OS_PERMISSION_DENIED'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_INTERNAL_ERROR:
                  $ref: '#/components/examples/OS_INTERNAL_ERROR'
      x-validation-rules:
      - name: VR_OS08_001
        description: "The request lacks valid authentication credentials: blank authorization,\
          \ missing authorization, expired user's tokenId. Refer to OS_AUTH_REQUIRED."
      - name: VR_OS08_002
        description: Login user has no permission. Refer to OS_PERMISSION_DENIED.
      - name: VR_OS08_003
        description: The server encountered an unexpected condition. Refer to OS_INTERNAL_ERROR.
      - name: VR_OS08_004
        description: A field or parameters contains the wrong data type. Refer to
          OS_BAD_REQUEST
      x-permissions:
      - product.organization.listByCurrentUser
      x-is-external: "true"
      x-roles:
      - IT_ADMIN
      x-requirements:
      - ORGS-SRS-31
      x-grpc:
        serviceName: OrganizationService
        methodName: listByCurrentUser
  /organizations:
    get:
      tags:
      - Organization
      summary: Get Organizations
      description: Fetches a paged list of organizations defined for the system. Use
        for looking up all organizations.
      operationId: API-OS02
      parameters:
      - name: name
        in: query
        description: The name of the organization to filter by
        required: false
        schema:
          type: string
        example: Health
      - name: page
        in: query
        description: One-based page index (1..N)
        schema:
          type: integer
          default: "1"
      - name: size
        in: query
        description: The size of the page to be returned
        schema:
          type: integer
          default: "10"
      - name: sort
        in: query
        description: "Sorting criteria in the format: property(,asc|desc). Default\
          \ sort order is ascending. Multiple sort criteria are supported."
        schema:
          type: array
          items:
            type: string
      responses:
        "200":
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/PagingInfoOrganizationDTO'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_BAD_REQUEST:
                  $ref: '#/components/examples/OS_BAD_REQUEST'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_AUTH_REQUIRED:
                  $ref: '#/components/examples/OS_AUTH_REQUIRED'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_PERMISSION_DENIED:
                  $ref: '#/components/examples/OS_PERMISSION_DENIED'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_INTERNAL_ERROR:
                  $ref: '#/components/examples/OS_INTERNAL_ERROR'
      x-validation-rules:
      - name: VR_OS02_001
        description: "The request lacks valid authentication credentials: blank authorization,\
          \ missing authorization, expired user's tokenId. Refer to OS_AUTH_REQUIRED."
      - name: VR_OS02_002
        description: Login user has no permission. Refer to OS_PERMISSION_DENIED.
      - name: VR_OS02_003
        description: The server encountered an unexpected condition. Refer to OS_INTERNAL_ERROR.
      - name: VR_OS02_004
        description: A field or parameters contains the wrong data type. Refer to
          OS_BAD_REQUEST
      x-permissions:
      - product.organization.list
      x-is-external: "true"
      x-roles:
      - IT_ADMIN
      x-requirements:
      - ORGS-SRS-34
      x-grpc:
        serviceName: OrganizationService
        methodName: list
    post:
      tags:
      - Organization
      summary: Create Organization
      description: "Establishes a new organization as a parent or as a child to another\
        \ organization. Use for creating a new organization, setting it as active\
        \ or inactive, and describing it."
      operationId: API-OS01
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationDTO'
        required: true
      responses:
        "415":
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_UNSUPPORTED_MEDIA_TYPE:
                  $ref: '#/components/examples/OS_UNSUPPORTED_MEDIA_TYPE'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_BAD_REQUEST:
                  $ref: '#/components/examples/OS_BAD_REQUEST'
                OS_BAD_SYNTAX:
                  $ref: '#/components/examples/OS_BAD_SYNTAX'
                OS_PARAM_REQUIRED:
                  $ref: '#/components/examples/OS_PARAM_REQUIRED'
                OS_MUST_BE_BETWEEN:
                  $ref: '#/components/examples/OS_MUST_BE_BETWEEN'
                OS_DATE_FORMAT:
                  $ref: '#/components/examples/OS_DATE_FORMAT'
                OS_INVALID_PERIOD:
                  $ref: '#/components/examples/OS_INVALID_PERIOD'
                OS_MUST_BE_GREATER_THAN_OR_EQUAL:
                  $ref: '#/components/examples/OS_MUST_BE_GREATER_THAN_OR_EQUAL'
                OS_DUPLICATE_FIELD:
                  $ref: '#/components/examples/OS_DUPLICATE_FIELD'
                OS_PARAM_NOT_EXISTS:
                  $ref: '#/components/examples/OS_PARAM_NOT_EXISTS'
        "201":
          description: Success response message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrganizationDTO'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_AUTH_REQUIRED:
                  $ref: '#/components/examples/OS_AUTH_REQUIRED'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_PERMISSION_DENIED:
                  $ref: '#/components/examples/OS_PERMISSION_DENIED'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorMessage'
              examples:
                OS_INTERNAL_ERROR:
                  $ref: '#/components/examples/OS_INTERNAL_ERROR'
      x-validation-rules:
      - name: VR_OS01_001
        description: "The request lacks valid authentication credentials: blank authorization,\
          \ missing authorization, expired user's tokenId. Refer to OS_AUTH_REQUIRED."
      - name: VR_OS01_002
        description: Login user has no permission. Refer to OS_PERMISSION_DENIED.
      - name: VR_OS01_003
        description: Invalid Content-Type value. Refer to OS_UNSUPPORTED_MEDIA_TYPE.
      - name: VR_OS01_004
        description: The server encountered an unexpected condition. Refer to OS_INTERNAL_ERROR.
      - name: VR_OS01_005
        description: There is a syntax error in the message. Refer to OS_BAD_SYNTAX.
      - name: VR_OS01_006
        description: A mandatory field is null. Refer to OS_PARAM_REQUIRED.
      - name: VR_OS01_007
        description: Invalid value not in range. Refer to OS_MUST_BE_BETWEEN.
      - name: VR_OS01_008
        description: Invalid date format. Refer to OS_DATE_FORMAT.
      - name: VR_OS01_009
        description: Invalid date period values. Refer to OS_INVALID_PERIOD.
      - name: VR_OS01_010
        description: Invalid numeric value. Refer to OS_MUST_BE_GREATER_THAN_OR_EQUAL.
      - name: VR_OS01_011
        description: Organization with same name already exists. Refer to OS_DUPLICATE_FIELD.
      - name: VR_OS01_012
        description: Parent Organization does not exist. Refer to OS_PARAM_NOT_EXISTS.
      x-permissions:
      - product.organization.create
      x-is-external: "true"
      x-roles:
      - IT_ADMIN
      x-requirements:
      - ORGS-SRS-25
      - ORGS-SRS-26
      - ORGS-SRS-27
      x-grpc:
        serviceName: OrganizationService
        methodName: create
components:
  schemas:
    AddressDTO:
      type: object
      properties:
        use:
          type: string
          description: Purpose of this address.
          example: work
        type:
          type: string
          description: Distinguishes between physical addresses (those you can visit)
            and mailing addresses (e.g. PO Boxes and care-of addresses). Most addresses
            are both.
          example: physical
        text:
          type: string
          description: Text representation of the address.
          example: "1234 Blvd RG 5th floor Indianapolis, IN 12000"
        line:
          type: array
          description: "Street name, number, direction & P.O. Box etc."
          example: 1234 Blvd
          items:
            type: string
            description: "Street name, number, direction & P.O. Box etc."
            example: 1234 Blvd
        city:
          type: string
          description: "Name of city, town etc."
          example: Indianapolis
        district:
          type: string
          description: District name (or county).
          example: LaPorte
        state:
          type: string
          description: Sub-unit of country.
          example: Indiana
        postalCode:
          type: string
          description: Postal code for area.
          example: "12000"
        country:
          type: string
          description: Country code.
          example: US
        period:
          $ref: '#/components/schemas/PeriodDTO'
      description: An address for the organization.
    CodeableConceptDTO:
      type: object
      properties:
        coding:
          type: array
          description: Code defined by a terminology system.
          items:
            $ref: '#/components/schemas/CodingDTO'
        text:
          type: string
          description: Plain text representation of the concept.
          example: Code from external system
      description: The type of contact.
    CodingDTO:
      type: object
      properties:
        system:
          type: string
          description: Identity of the terminology system.
          example: https://acme.lab/resultcodes
        version:
          type: string
          description: Version of the system - if relevant.
          example: 0.1.0
        code:
          type: string
          description: Symbol in syntax defined by the system.
          example: COD1
        display:
          type: string
          description: Representation defined by the system.
          example: Code1
        userSelected:
          type: boolean
          description: If this coding was chosen directly by the user.
          example: true
      description: Code defined by a terminology system.
    ContactPointDTO:
      type: object
      properties:
        system:
          type: string
          description: Telecommunications form for contact point - what communications
            system is required to make use of the contact.
          example: phone
        value:
          type: string
          description: The actual contact point details.
          example: 5555-444-333
        use:
          type: string
          description: Purpose of this contact point.
          example: work
        rank:
          minimum: 1
          type: integer
          description: Specify preferred order of use (1 = highest).
          format: int32
          example: 1
        period:
          $ref: '#/components/schemas/PeriodDTO'
      description: A contact detail for the organization.
    IdentifierDTO:
      type: object
      properties:
        use:
          type: string
          description: "Identifies the purpose for this identifier, if known."
          example: official
        type:
          $ref: '#/components/schemas/CodeableConceptDTO'
        system:
          type: string
          description: The namespace for the identifier value.
          example: urn:ietf:rfc:3986
        value:
          type: string
          description: The value that is unique.
          example: urn:uuid:a76d9bbf-f293-4fb7-ad4c-2851cac77162
        assignerOrganizationId:
          type: string
          description: ID of the organization that issued the ID.
          example: 05e78fe8-0742-11eb-adc1-0242ac120002
        period:
          $ref: '#/components/schemas/PeriodDTO'
      description: Identifies this organization across multiple systems.
    OrganizationPartialDTO:
      type: object
      properties:
        active:
          type: boolean
          description: Whether the organization's record is still in active use.
          example: true
        parentId:
          type: string
          description: A reference to the parent organization if applies.
          format: uuid
          example: fb108dda-34fe-462d-9575-4bb2b468e8ce
        name:
          maxLength: 255
          minLength: 0
          type: string
          description: Name used for the organization.
          example: Health
        type:
          type: array
          description: Kind of organization.
          items:
            $ref: '#/components/schemas/CodeableConceptDTO'
        alias:
          type: array
          description: "A list of alternate names that the organization is known as,\
            \ or was known as in the past."
          example: Health
          items:
            type: string
            description: "A list of alternate names that the organization is known\
              \ as, or was known as in the past."
            example: Health
        description:
          type: string
          description: A description for the organization.
          example: This is a healthcare provider organization.
        telecom:
          type: array
          description: A contact detail for the organization.
          items:
            $ref: '#/components/schemas/ContactPointDTO'
        identifier:
          type: array
          description: Identifies this organization across multiple systems.
          items:
            $ref: '#/components/schemas/IdentifierDTO'
        contact:
          type: array
          description: Contact for the organization for a certain purpose.
          items:
            $ref: '#/components/schemas/UserContactDTO'
        address:
          type: array
          description: An address for the organization.
          items:
            $ref: '#/components/schemas/AddressDTO'
    PeriodDTO:
      type: object
      properties:
        start:
          type: string
          description: Starting time with inclusive boundary.
          format: date-time
          example: 2020-02-07T18:28:17Z
        end:
          type: string
          description: "End time with inclusive boundary, if not ongoing."
          format: date-time
          example: 2020-02-07T18:28:17Z
      description: Time period when address was/is in use.
    UserContactDTO:
      type: object
      properties:
        purpose:
          $ref: '#/components/schemas/CodeableConceptDTO'
        userId:
          type: string
          description: User identifier.
          example: 05e78fe8-0742-11eb-adc1-0242ac120002
      description: Contact for the organization for a certain purpose.
    ErrorDetail:
      type: object
      properties:
        severity:
          type: string
        code:
          type: string
        details:
          type: string
    ErrorMessage:
      type: object
      properties:
        issues:
          type: array
          items:
            $ref: '#/components/schemas/ErrorDetail'
    OrganizationDTO:
      required:
      - active
      - name
      type: object
      properties:
        id:
          type: string
          description: Organization ID.
          format: uuid
          example: 05e78fe8-0742-11eb-adc1-0242ac120002
        active:
          type: boolean
          description: Whether the organization's record is still in active use.
          example: true
        parentId:
          type: string
          description: A reference to the parent organization if applies.
          format: uuid
          example: fb108dda-34fe-462d-9575-4bb2b468e8ce
        name:
          maxLength: 255
          minLength: 0
          type: string
          description: Name used for the organization.
          example: Health
        type:
          type: array
          description: Kind of organization.
          items:
            $ref: '#/components/schemas/CodeableConceptDTO'
        alias:
          type: array
          description: "A list of alternate names that the organization is known as,\
            \ or was known as in the past."
          example: Health
          items:
            type: string
            description: "A list of alternate names that the organization is known\
              \ as, or was known as in the past."
            example: Health
        description:
          maxLength: 4096
          minLength: 0
          type: string
          description: A description for the organization.
          example: This is a healthcare provider organization.
        telecom:
          type: array
          description: A contact detail for the organization.
          items:
            $ref: '#/components/schemas/ContactPointDTO'
        identifier:
          type: array
          description: Identifies this organization across multiple systems.
          items:
            $ref: '#/components/schemas/IdentifierDTO'
        contact:
          type: array
          description: Contact for the organization for a certain purpose.
          items:
            $ref: '#/components/schemas/UserContactDTO'
        address:
          type: array
          description: An address for the organization.
          items:
            $ref: '#/components/schemas/AddressDTO'
    NavigationInfoOrganizationDTO:
      type: object
      properties:
        first:
          type: string
          description: url to get first page
          example: api/v2/entity?page=1&size=20
        previous:
          type: string
          description: url to get previous page
          example: api/v2/entity?page=4&size=20
        next:
          type: string
          description: url to get next page
          example: api/v2/entity?page=6&size=20
        last:
          type: string
          description: url to get last page
          example: api/v2/entity?page=11&size=20
    PagingInfoOrganizationDTO:
      type: object
      properties:
        totalCount:
          type: integer
          description: Total results count
          format: int64
          example: 215
        data:
          type: array
          items:
            $ref: '#/components/schemas/OrganizationDTO'
        paging:
          $ref: '#/components/schemas/NavigationInfoOrganizationDTO'
    ResponseMessage:
      type: object
      properties:
        success:
          type: boolean
  examples:
    OS_UNSUPPORTED_MEDIA_TYPE:
      summary: OS_UNSUPPORTED_MEDIA_TYPE
      description: Content-type header is missing or is different to application/json.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\" : \"OS_UNSUPPORTED_MEDIA_TYPE\",\n      \"details\" : \"Unsupported\
        \ media type.\"\n    }\n  ]\n}"
    OS_BAD_REQUEST:
      summary: OS_BAD_REQUEST
      description: The server cannot or will not process the request due to something
        that is perceived to be a client error.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_BAD_REQUEST\",\n      \"details\": \"Could not resolve property:\
        \ page.\"\n    }\n  ]\n}"
    OS_NO_EXIST:
      summary: OS_NO_EXIST
      description: The server cannot find any result.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_NO_EXIST\",\n      \"details\": \"Resource Id {0} does not exist\"\
        \n    }\n  ]\n}"
    OS_PARAM_REQUIRED:
      summary: OS_PARAM_REQUIRED
      description: Field is required.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_PARAM_REQUIRED\",\n      \"details\": \"{0} is required.\"\n\
        \    }\n  ]\n}"
    OS_INTERNAL_ERROR:
      summary: OS_INTERNAL_ERROR
      description: The server encountered an unexpected condition that prevented it
        from fulfilling the request.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_INTERNAL_ERROR\",\n      \"details\": \"Oops, something went\
        \ wrong! Please contact the server administrator.\"\n    }\n  ]\n}"
    OS_PERMISSION_DENIED:
      summary: OS_PERMISSION_DENIED
      description: The server understood the request but refuses to authorize it.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_PERMISSION_DENIED\",\n      \"details\": \"User does not have\
        \ permission to perform the operation on the data.\"\n    }\n  ]\n}"
    OS_AUTH_REQUIRED:
      summary: OS_AUTH_REQUIRED
      description: The request has not been applied because it lacks valid authentication
        credentials for the target resource.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_AUTH_REQUIRED\",\n      \"details\": \"You must authenticate\
        \ before you can use this service.\"\n    }\n  ]\n}"
    OS_BAD_SYNTAX:
      summary: OS_BAD_SYNTAX
      description: The request has not been applied because there is a syntax error
        in one of the provided fields.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_BAD_SYNTAX\",\n      \"details\": \"Bad Syntax in {0}.\"\n  \
        \  }\n  ]\n}"
    OS_MUST_BE_BETWEEN:
      summary: OS_MUST_BE_BETWEEN
      description: The server will not process the request due to a field restriction.
        A field is expected to be between two limits.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_MUST_BE_BETWEEN\",\n      \"details\": \"{0} must be between\
        \ {1} and {2}.\"\n    }\n  ]\n}"
    OS_MUST_NOT_BE_LONGER_THAN:
      summary: OS_MUST_NOT_BE_LONGER_THAN
      description: The server will not process the request due to a field restriction.
        A value is expected to be less than a limit.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\" : \"OS_MUST_NOT_BE_LONGER_THAN\",\n      \"details\": \"{0} cannot\
        \ be longer than {1} characters.\"\n    }\n  ]\n}"
    OS_FIELDS_MUTUALLY_EXCLUSIVE:
      summary: OS_FIELDS_MUTUALLY_EXCLUSIVE
      description: The server will not process the request due to a field restriction.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_FIELDS_MUTUALLY_EXCLUSIVE\",\n      \"details\": \"Field {0}\
        \ or {1} is required, please provide one of them; they are mutually exclusive.\"\
        \n    }\n  ]\n}"
    OS_DATE_FORMAT:
      summary: OS_DATE_FORMAT
      description: The server will not process the request due to a format error in
        a date.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_DATE_FORMAT\",\n      \"details\": \"The Date value {0} is not\
        \ in the correct format.\"\n    }\n  ]\n}"
    OS_MUST_BE_GREATER_THAN_OR_EQUAL:
      summary: OS_MUST_BE_GREATER_THAN_OR_EQUAL
      description: The server will not process the request due to a field restriction.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_MUST_BE_GREATER_THAN_OR_EQUAL\",\n      \"details\": \"{0} must\
        \ be greater than or equal to {1}.\"\n    }\n  ]\n}"
    OS_SORT_UNKNOWN:
      summary: OS_SORT_UNKNOWN
      description: The server will not process the request due to an invalid parameter
        value.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_SORT_UNKNOWN\",\n      \"details\": \"Unknown sort parameter\
        \ name {0}.\"\n    }\n  ]\n}"
    OS_INVALID_PERIOD:
      summary: OS_INVALID_PERIOD
      description: The server will not process the request due to field restriction.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_INVALID_PERIOD\",\n      \"details\": \"Invalid {0} period. Start\
        \ date must be before end date.\"\n    }\n  ]\n}"
    OS_DUPLICATE_FIELD:
      summary: OS_DUPLICATE_FIELD
      description: There is already an existing entity with the given field value.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_DUPLICATE_FIELD\",\n      \"details\": \"The value {0} for {1}\
        \ is already in use.\"\n    }\n  ]\n}"
    OS_PARAM_NOT_EXISTS:
      summary: OS_PARAM_NOT_EXISTS
      description: Parameter value does not exist in the database.
      value: "{\n  \"issues\": [\n    {\n      \"severity\" : \"error\",\n      \"\
        code\": \"OS_PARAM_NOT_EXISTS\",\n      \"details\": \"The {0} with {1} {2}\
        \ does not exist.\"\n    }\n  ]\n}"
